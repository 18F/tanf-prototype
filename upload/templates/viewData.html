{% extends "base-generic.html" %}

{% block content %}
	<h1>View Data</h1>
	<p>View data uploaded to the TANF Data Reporting system!</p>

	<form action="{% url 'viewdata' %}" method="get">
		<select name="table" onchange="this.form.submit()">
		{% for table in tablelist %}
			{% if selected_table == table %}
				<option value="{{ table }}" selected>{{ table }}</option>
			{% else %}
				<option value="{{ table }}">{{ table }}</option>
			{% endif %}
		{% endfor %}
		</select>
	    <p>Hits Per Page:
	    <select name="hitsperpage" onchange="this.form.submit()" style="width: 100px;">
	      {% for hits in hitsperpagelist %}
	        {% if selected_hitsperpage == hits %}
	          <option value="{{ hits }}" selected>{{ hits }}</option>
	        {% else %}
	          <option value="{{ hits }}">{{ hits }}</option>
	        {% endif %}
	      {% endfor %}
	    </select></p>

	</form>

	<table>
		{% for row in data %}
			<tr>
				<td>{{ row }}</td>
			</tr>
		{% endfor %}
	</table>

	{% if data.paginator.num_pages > 1 %}
	<div class="pagination">
	    <span class="step-links">
	        {% if data.has_previous %}
	            <a href="?page=1">&laquo; first</a>
	            <a href="?page={{ data.previous_page_number }}">previous</a>
	        {% endif %}

	        <span class="current">
	            Page {{ data.number }} of {{ data.paginator.num_pages }}.
	        </span>

	        {% if data.has_next %}
	            <a href="?page={{ data.next_page_number }}">next</a>
	            <a href="?page={{ data.paginator.num_pages }}">last &raquo;</a>
	        {% endif %}
	    </span>
	</div>
	{% endif %}

{% endblock %}
